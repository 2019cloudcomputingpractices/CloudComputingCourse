## 本周具体工作计划

完成以下内容：

- FTP服务器的性能测试

## 本周主要工作内容

### i. 已经完成工作

#### 1. Jmeter的使用

Apache Jmeter是一款开源免费的性能测试工具，支持HTTP，FTP等多种协议。其GUI界面操作也非常方便，可以直观地创建测试任务并通过多种方式观察测试结果。其界面如下所示：

![week4-jmeter-gui](Q:\UniversityResources\Courses\Junior\Semester-2\CloudComputingCourse\CloudComputingCourse\final\images\week4-jmeter-gui.png)

左侧是测试任务，每个测试任务是一个线程组，我们可以设置线程组的线程数及其启动方式（同时/延迟），以及每个线程携带的请求（FTP上传文件/下载文件）。

通过这些简单的设置我们便可以实现各种压力测试，并通过多种报表/图观察测试结果。

#### 2. 性能测试

**测试1**

并发量：100个线程

请求：下载一个30K的文件

结果：

![week4-test1](Q:\UniversityResources\Courses\Junior\Semester-2\CloudComputingCourse\CloudComputingCourse\final\images\week4-test1.png)

每个连接的平均处理时间：733ms，中位数：674ms，90% <= 949ms，95% <= 1012ms，99% <= 1768ms



**测试2**

并发量：100个线程

请求：下载一个10M的文件

结果：

传输速率：

![week4-test2-net](Q:\UniversityResources\Courses\Junior\Semester-2\CloudComputingCourse\CloudComputingCourse\final\images\week4-test2-net.png)

![week4-test2](Q:\UniversityResources\Courses\Junior\Semester-2\CloudComputingCourse\CloudComputingCourse\final\images\week4-test2.png)

每个连接的平均处理时间：241.99s，中位数：250.096s，90% <= 266.081s，95% <= 267.943s，99% <= 268.347s



#### 3. 可以继续优化的地方

- 创建多个worker进程（而非线程）同时工作

- 使用内存池分配内存
- 使用线程池
- 使用epoll IO多路复用来处理socket的读和写
- 多个数据连接同时传输数据时提供排队机制，保证一定的下载速率，减少线程频繁切换的开销
- 优化系统跟tcp相关的参数设置



### ii. 未完成工作

无

### iii. 问题与困难

无

## 下周工作计划

无

## 建议与意见

无