# Flask Web 框架学习

## 任务

**Python Flask Web框架学习**

- 研读QQ群文件中的《Flask Web开发：基于Python的Web应用开发》电子书，学习flask框架
- 根据书中的叙述，尝试在自己的开发环境中，开发一个基于Flask的Web应用demo

## Flask 简介

Flask是一个基于Python开发并且依赖jinja2模板和Werkzeug WSGI服务的一个微型框架，对于Werkzeug本质是Socket服务端，其用于接收http请求并对请求进行预处理，然后触发Flask框架，开发人员基于Flask框架提供的功能对请求进行相应的处理，并返回给用户，如果要返回给用户复杂的内容时，需要借助jinja2模板来实现对模板的处理，即：将模板和数据进行渲染，将渲染后的字符串返回给用户浏览器。

“微”(micro) 并不表示你需要把整个 Web 应用塞进单个 Python 文件（虽然确实可以 ），也不意味着 Flask 在功能上有所欠缺。微框架中的“微”意味着 Flask 旨在保持核心简单而易于扩展。Flask 不会替你做出太多决策——比如使用何种数据库。而那些 Flask 所选择的——比如使用何种模板引擎——则很容易替换。除此之外的一切都由可由你掌握。

默认情况下，Flask 不包含数据库抽象层、表单验证，或是其它任何已有多种库可以胜任的功能。然而，Flask 支持用扩展来给应用添加这些功能，如同是 Flask 本身实现的一样。众多的扩展提供了数据库集成、表单验证、上传处理、各种各样的开放认证技术等功能。Flask 也许是“微小”的，但它已准备好在需求繁杂的生产环境中投入使用。

## Flask 学习

在Python的虚拟环境下使用pip安装Flask：

```sh
pip install flask
```

然后使用import来查看是否成功安装：

![Import flask.png](https://i.loli.net/2019/05/25/5ce8e568d8cc663714.png)

Flask可以使用Route装饰器来告诉用户函数关联的URL。先试试hello world：

![hello py.png](https://i.loli.net/2019/05/25/5ce8e568aea4962152.png)

可以看到服务器成功的打开了。

添加一些简单的GET方法进行路由测试：

![get test.png](https://i.loli.net/2019/05/25/5ce8e568c3f8840875.png)

![route test.png](https://i.loli.net/2019/05/25/5ce8e568f119419194.png)

然后从网上下载了blog的模板进行测试，发现python必须用utf-8的编码，这样会出现很多乱码。我没有学过任何的前端，所以只制作了简单的前端，设计一些RESTFUL api来测试flask。我使用的数据库是MongoDB，制作的是一个用户登录与注册系统，通过web和postman来完成测试。因为上面已经有了GET接口，所以下面主要是测试POST方法：

通过web访问到的主页：

![主页.png](https://i.loli.net/2019/05/25/5ce8e568f1f2621262.png)

然后直接在主页点击Reg，会注册用户，返回的是JSON数据，所以没有在Web界面截图，而在Postman里测试结果：

![注册Post.png](https://i.loli.net/2019/05/25/5ce8e568f0d8790083.png)

而登陆的Web和Postman界面如下：

![登陆post.png](https://i.loli.net/2019/05/25/5ce8e568d8e0e43804.png)

![登陆post2.png](https://i.loli.net/2019/05/25/5ce8e568f1ff671479.png)

同时我注册了Cookie，在Postman中可以看到下发的Cookie：

![下发Cookie.png](https://i.loli.net/2019/05/25/5ce8e568f1bc865875.png)

在cmd中可以看到以上表单提交的JSON数据：

![cmd表单信息.png](https://i.loli.net/2019/05/25/5ce8e568f088e29997.png)




