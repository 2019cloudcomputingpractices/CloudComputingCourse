# 本周具体工作计划
学习openstack单节点的部署
# 本周主要工作内容
## 已完成工作
在虚拟机上完成了openstack单节点的部署
效果图如下：
![](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/raw/16340147-刘恒伟/task1/image/login.png)
![](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/raw/16340147-刘恒伟/task1/image/cmd.png)
![](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/raw/16340147-刘恒伟/task1/image/afterlogin.png)
## 未完成工作
这一周好像没有了
## 问题与困难
这次配置的过程对于我来说是真的一波三折，我一开始用的是我本来就有的一个ubuntu虚拟机，版本号是16.04，因为我觉得ubuntu的系统肯定是有向前兼容性的，所以我觉得应该在16.04上面应该也可以，所以我就在上面先安装了mysql-server，在安装keepalived的时候看了一篇垃圾博客，从压缩包安装的那种（我一开始不知道可以用apt-get直接安，因为apt-get在update之前找不到包），然后这个博客最后复制文件的路径好像又错了，然后keepalived服务就一直跑不起来，到后面终于跑起来了后我就开始运行脚本，然后发现这个垃圾脚本竟然做了版本检查，直接禁止在除了14.04之外的系统安装，第一个虚拟机gg。
然后我安装了一个14.04的ubuntu desktop的虚拟机，这次在安装完mysql和keepalived后安装脚本终于可以跑起来了，但是在安装keystone的时候还是崩掉了，看了下Log是登录数据库的用户密码不对，然后我打开了脚本的配置文件，发现用的密码是admin123，我把这个admin123换成了我的数据库密码，再跑了一遍发现还是不行，迫不得已我就把密码又改回了admin123，转而把我mysql的root帐号密码改成了admin123，最后终于跑起来了然后在nova-compute模块又卡住了，打开log发现是依赖问题，我尝试手动安装这些被依赖的包，安装这些包其实并没有出什么大问题，但是当我再次运行的时候在keystone的时候竟然就卡住了，看了Log后发现是一个403拒绝访问的问题，这就让我十分不解了，后面google了很长一段时间都没有找到答案，只好在群里问TA，TA表示卸载重安，我卸载重安后在glance卡住了，打开log发现是dpkg的问题，提示glance的一些依赖包没有被configured，后面google了一下发现是glance的一个bug，只要删除原来的配置文件就可以了，我就直接dpkg -P命令彻底删除这些包，就解决了这个问题，之后又出现了一大堆的依赖问题，所以后面我就陷入了一个卸载->完全卸载glance的那五六个包->安装发现会出现的依赖的包->运行脚本->失败->看log发现还是包的依赖问题后记住这个包的->卸载的一个循环，循环了若干次之后（因为依赖问题实在是太多了），终于出现了一个新错误，是什么不存在default network,上网查了许久后发现要修改一个部件的配置，但是我重装的话肯定是要卸载这个部件的，所以就陷入了一个无解的状态，第二个虚拟机gg。
第三个虚拟机老老实实用TA给的镜像安装ubuntu server 14.04.5虚拟机，这个虚拟机的网卡配置搞了我很久，我一直没办法用仅主机模式连接上网络，明明网关都能ping通了，然后解析dns地址也正常，又设置了默认路由，windows的以太网也共享了网络连接给vmnet1，但是就是连不上，后面没办法还是搞了个NAT网卡，配置好ip后成功通网，运行脚本，然后在mysql的时候还是挂了，还是依赖问题，但是TA说这里应该是没问题的，我就想是不是中间的步骤出了什么问题，是不是配置网卡的时候动了什么不得了的东西，所以就打算重新弄一个虚拟机，第三个虚拟机gg。
第四个虚拟机我就设置了语言直接为english，排除编码问题的可能，然后NAT网卡和仅主机模式网卡直接在外面配置好就不动了，运行脚本，发现还是不行，感觉要gg了，因为前面在ubuntu deskop的经历告诉我出现了一个依赖问题就会出现第二个第三个若干个，但是本着死马当活马医的态度我还是安装了一下mysql和keepalived，竟然就一次成功了，就很玄学。
## 建议与意见
求求你们更新下脚本吧，受不了了，几千年前的脚本到现在要用真的要亲命的