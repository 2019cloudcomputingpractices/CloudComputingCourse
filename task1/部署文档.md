## 本周具体工作计划

学习openstack单节点的部署



## 本周主要工作内容

### 准备镜像

参照安装手册的推荐，本次安装以ubuntu-server_x64 14.04.5作为系统镜像。



### VMWare创建虚拟机

- 新建虚拟机

  打开VMWare新建虚拟机，点击新建虚拟机，安装类型选择默认的选项即可，如下图：

  ![虚拟机安装1](/images/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%851.png?raw=true)

  

  然后镜像选择ubuntu-server_x64 14.04.5

![虚拟机安装2](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340143-%E6%9E%97%E6%A0%91%E5%A5%8E-16340260-%E5%BE%90%E8%BE%BE%E7%83%BD/task1/images/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%852.png?raw=true)



​	之后在这里对虚拟机的硬件进行配置 

![虚拟机安装3](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340143-%E6%9E%97%E6%A0%91%E5%A5%8E-16340260-%E5%BE%90%E8%BE%BE%E7%83%BD/task1/images/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%853.png?raw=true)

​	

​	首先是虚拟机需要有两个虚拟网卡，默认已经有一个NAT模式的网卡，我们需要手动添加一块新的网卡并设置为Host-only模式。NAT模式的网卡能够连接外网，Host-only模式的网卡需要经过配置才能访问外网，默认只能访问主机 。

![虚拟机安装4](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340143-%E6%9E%97%E6%A0%91%E5%A5%8E-16340260-%E5%BE%90%E8%BE%BE%E7%83%BD/task1/images/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%854.png?raw=true)

​	另外还有一个必要的步骤是开启硬件虚拟化选项，否则openstack无法正常工作。CPU的核数以及内存可以结合主机情况适当增加。

![虚拟机安装5](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340143-%E6%9E%97%E6%A0%91%E5%A5%8E-16340260-%E5%BE%90%E8%BE%BE%E7%83%BD/task1/images/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%855.png?raw=true)



​	设置完成后即可开启虚拟机开始系统的安装，并根据提示完成系统的安装。



### 基本配置和安装

- 安装openssh-server，使得可以使用ssh登录和传输文件到虚拟机中

  ```bash
  $sudo apt-get install openssh-server
  ```

- 设置root账户的密码，之后执行安装脚本时需要以root用户身份执行

  ```bash
  $sudo passwd root
  ```

  

### 开始部署openstack

- 通过ssh将openstack的安装包发送到虚拟机中，并解压

- 切换到root用户，运行run.sh脚本

  安装过程可以通过tail 查看安装过程中的信息:

  ```bash
  $tail -f /var/log/openstack/all.log
  ```

  

- 安装过程需要比较久的时间，安装过程一开始会有若干选项需要设置，参照安装手册中的设置即可。run.sh运行成功之后将能看到安装进度为100%。

![安装成功](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340143-%E6%9E%97%E6%A0%91%E5%A5%8E-16340260-%E5%BE%90%E8%BE%BE%E7%83%BD/task1/images/%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F.png?raw=true)

-  此时重启虚拟机，并查看网卡eth0的IP地址

  ```bash
  $ ifconfig
  ```

  然后在主机的浏览器中打开ip:8088/horizon即可看到openstack的dashboard登录界面。如下图，domain填写default即可，用户名和密码即在运行run.sh过程中所配置的用户名和密码。这里密码设置为admin123。

  ![登录界面](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340143-%E6%9E%97%E6%A0%91%E5%A5%8E-16340260-%E5%BE%90%E8%BE%BE%E7%83%BD/task1/images/%E7%99%BB%E5%BD%95%E7%95%8C%E9%9D%A2.png?raw=true)

  登录后，就可以看到dashboard主页面了

  ![登录成功](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340143-%E6%9E%97%E6%A0%91%E5%A5%8E-16340260-%E5%BE%90%E8%BE%BE%E7%83%BD/task1/images/%E7%99%BB%E5%BD%95%E6%88%90%E5%8A%9F.png?raw=true)



## 未完成工作

暂无



## 问题与困难

本次主要的问题和困难在于理解安装过程所安装的各个组件的作用及配置方式。若安装过程出现相关的失败或配置错误也将会是比较难以解决的问题。



## 建议与意见

