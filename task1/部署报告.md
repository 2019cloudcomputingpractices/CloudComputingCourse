# Task 1 部署报告

> 成员：
>
> 16340291 张马良 
>
> 16340268 杨豪



## 失败

安装ubuntu desktop 14.04

我使用的使VMWare，他已经设置好了NAT的网络设置了

![img](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340291-%E5%BC%A0%E9%A9%AC%E8%89%AF-16340268-%E6%9D%A8%E8%B1%AA/task1/picture/1.png?raw=true)

然后ping内外网检测：

![img](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340291-%E5%BC%A0%E9%A9%AC%E8%89%AF-16340268-%E6%9D%A8%E8%B1%AA/task1/picture/2.png?raw=true)

 

之后进入安装过程。

首先apt-get update一下。

然后使用ssh传输脚本。首先看一下安装ssh没有，并启动。

![img](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340291-%E5%BC%A0%E9%A9%AC%E8%89%AF-16340268-%E6%9D%A8%E8%B1%AA/task1/picture/3.png?raw=true)

然后用puTTY连接上，传送脚本文件：

![img](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340291-%E5%BC%A0%E9%A9%AC%E8%89%AF-16340268-%E6%9D%A8%E8%B1%AA/task1/picture/4.png?raw=true)

这是使用一个测试用的test.txt文件传过去，发现成功了，之后开始传大文件。

![img](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340291-%E5%BC%A0%E9%A9%AC%E8%89%AF-16340268-%E6%9D%A8%E8%B1%AA/task1/picture/5.png?raw=true)

![img](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340291-%E5%BC%A0%E9%A9%AC%E8%89%AF-16340268-%E6%9D%A8%E8%B1%AA/task1/picture/6.png?raw=true)

![img](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340291-%E5%BC%A0%E9%A9%AC%E8%89%AF-16340268-%E6%9D%A8%E8%B1%AA/task1/picture/7.png?raw=true)

![img](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340291-%E5%BC%A0%E9%A9%AC%E8%89%AF-16340268-%E6%9D%A8%E8%B1%AA/task1/picture/8.png?raw=true)

然后按照脚本运行，装东西

![img](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340291-%E5%BC%A0%E9%A9%AC%E8%89%AF-16340268-%E6%9D%A8%E8%B1%AA/task1/picture/9.png?raw=true)

到这里好像失败了。原因是这个包里下不到mysql server了。要换源下载mysql server 5.5。

最开始我换成了阿里源，但是报找不到：

![img](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340291-%E5%BC%A0%E9%A9%AC%E8%89%AF-16340268-%E6%9D%A8%E8%B1%AA/task1/picture/10.png?raw=true)

之后换了清华源，然后成功安装。中间有一步是要设置数据库root用户密码。

还要安装keepalived。

Ok，继续安装，然后又是：

![img](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340291-%E5%BC%A0%E9%A9%AC%E8%89%AF-16340268-%E6%9D%A8%E8%B1%AA/task1/picture/11.png?raw=true)

又失败了……



## 成功

好在这时候TA又在群里上传了更多的教程。和上次相比，这次最主要的区别我看起来似乎是ubuntu版本是14.04.5.

好的，重新安装虚拟机：

![img](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340291-%E5%BC%A0%E9%A9%AC%E8%89%AF-16340268-%E6%9D%A8%E8%B1%AA/task1/picture/12.png?raw=true)

安装好了，用puTTY连上，方便复制粘贴。

用vi的话不能复制粘贴，懒得换源了。软件安装的时候下载的很慢。apt-get update了有20分钟……然后我看见TA的指南里写：不能更新操作系统的包。完了，但是都下完了，先继续试试。果然不知道为啥update失败了。之后怀着侥幸心理进行接下来的步骤。

然后安装mysql-server-5.5,设置密码：

![img](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340291-%E5%BC%A0%E9%A9%AC%E8%89%AF-16340268-%E6%9D%A8%E8%B1%AA/task1/picture/13.png?raw=true)

然后再下keepalived。失败了，不过我再apt-get update更新一下包，然后又莫名其妙安装成功了。之后用puTTY把文件传到虚拟机。

![img](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340291-%E5%BC%A0%E9%A9%AC%E8%89%AF-16340268-%E6%9D%A8%E8%B1%AA/task1/picture/14.png?raw=true)

然后将文件拷贝到root目录下，解压。

![img](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340291-%E5%BC%A0%E9%A9%AC%E8%89%AF-16340268-%E6%9D%A8%E8%B1%AA/task1/picture/15.png?raw=true)

然后开始运行脚本：

![img](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340291-%E5%BC%A0%E9%A9%AC%E8%89%AF-16340268-%E6%9D%A8%E8%B1%AA/task1/picture/16.png?raw=true)

安装过程比较久，可能是更新了包的原因，内心很忐忑。我决定先去教室，在教室用远程桌面看这是什么情况，跳过这个煎熬的等待过程。

等待……

等待过后：脚本安装好像成了，提示我重启。OK，重启。

![img](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340291-%E5%BC%A0%E9%A9%AC%E8%89%AF-16340268-%E6%9D%A8%E8%B1%AA/task1/picture/17.png?raw=true)

成了，真不错啊

![img](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340291-%E5%BC%A0%E9%A9%AC%E8%89%AF-16340268-%E6%9D%A8%E8%B1%AA/task1/picture/18.png?raw=true)



## 遇见的坑：

1. 必须用14.04的ubuntu，16.04的不行。好像还必须是14.04.5的。
2. 最开始使用的官方镜像，安装完成后重启结果不断地重装系统，可能是iso一直作为镜像碟片存在于虚拟机中。换了一个镜像解决这个问题。
3. 使用VirtualBox配置虚拟机网络设置的时候即使能ping通内外网ssh也无法使用，最后用了VMWare。
4. 虚拟机要虚拟化。
