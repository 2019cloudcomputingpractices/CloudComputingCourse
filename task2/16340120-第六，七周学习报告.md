## 第六周和第七周学习周报
### 本周任务

- 用集成脚本一气呵成安装openstack，能够成功打开dashboard
- 虚拟网络设置
- 开启实例

### 具体描述

1.成功搭建openstack环境后，通过dashboard登录。  
2.登陆后查看系统信息（看启动了什么服务）  
3.测试网络配置是否正确  
  - 上传cirros镜像、创建flavor、创建vxlan网络、ext_net网络、路由
  - 创建实例
  - 添加安全组规则（ssh、icmp）

### 已完成工作

- 用集成脚本一气呵成安装openstack，能够成功打开dashboard
- 虚拟网络设置
- 开启实例

### 未完成工作
无

- - -

### 第六周学习报告
#### OpenStack网络类型

  - **Local**：只允许在本服务器内通信的虚拟网络。一般只用于单虚拟机VM测试，特点是不会与宿主机的任何物理网卡相连，故而无法与宿主机之外的网络通信，也不关联任何的VLAN ID。同时因为每个local network有自己的bridge，bridge之间是没有连通的，所以两个local network之间也不能通信，即便它们处于同一宿主机上。
  - **Flat**：所有实例桥接到同一个虚拟网络，需要手动设置网桥。
  - **VLAN**：将同一个LAN（local area network）上的用户在逻辑上分成多个虚拟局域网，换句话说，一个带有VLAN功能的switch能够同时处于多个LAN中，每个vlan中的主机连接交换机的端口是access口，从而保证了交换机只在同一个vlan中转发包。
  - **GRE**：GRE是一种通用的格式，我们可以使用GRE进行很多不同种类的封装。通过GRE，VM之间的ARP、IP报文都能在GRE的封装下通过IP网络进行传递。不同的网络通过GRE header中的tunnel id号区别。
  - **Vxlan**：VXLAN和GRE区别不大，相比于GRE的通用性，VXLAN主要用于封装、转发2层报文。其使得多个通过三层连接的网络可以表现的和直接通过一台一台物理交换机连接配置而成的网络一样处在一个LAN中。
  
#### 浮动IP的作用

  - 一个浮动IP通常是一个公开的、可以路由到的IP地址，并且不会自动分配给实体设备。项目管理者临时分配动态IP到一个或者多个实体设备。这个实体设备有自动分配的静态IP用于内部网间设备的通讯。这个内部网使用私有地址，这些私有地址不能被路由到。通过浮动IP内网实体的服务才能被外网识别和访问。用户从系统管理员配置的资源池中为他们的项目获取IP地址。一旦用户获取一个浮动IP，就拥有了这个IP。他可以分配这个IP到一个计算实体，或者在任一时间移除分配给其他设备。就算设备关机，用户还拥有他属于他的浮动IP。浮动IP就像一种资源，当需要时可以分配给其他设备。
  
#### OpenStack虚拟机实例创建
  
  - 创建OpenStack虚拟机实例是建立在OpenStack三大核心组件之上。分别是Keystone、Glance、Nova。Keystone负责授权认证、租户管理、项目权限和配额以及服务目录管理。Glance负责为Nova提供创建实例所需要的镜像文件，这种镜像文件可以包含很多格式，大多数都是我们常见的镜像格式，如raw、qcow2。Nova负责虚拟机生命周期的管理，以及宿主机资源调度。Nova还决定了虚拟机实例建立在哪一台Hypervisor物理机之上。

- - -

### 第七周学习报告

#### 查看系统信息
![System information](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340120-%E6%9D%8E%E6%98%8E%E6%97%AD/task2/image/system-information.png)

#### 添加映像
![image](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340120-%E6%9D%8E%E6%98%8E%E6%97%AD/task2/image/image.png)

#### 配置内部和外部网络
![internel&externel](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340120-%E6%9D%8E%E6%98%8E%E6%97%AD/task2/image/internel-externel-net.png)

#### 配置内部网络子网
![internel subnet](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340120-%E6%9D%8E%E6%98%8E%E6%97%AD/task2/image/internel-subnet.png)

#### 配置外部网络子网
![externel subnet](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340120-%E6%9D%8E%E6%98%8E%E6%97%AD/task2/image/externel-subnet.png)

#### 配置路由
![router](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340120-%E6%9D%8E%E6%98%8E%E6%97%AD/task2/image/router.png)

#### 创建实例
![Instances](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340120-%E6%9D%8E%E6%98%8E%E6%97%AD/task2/image/instances.png)

#### 显示实例cirros控制台
![console](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340120-%E6%9D%8E%E6%98%8E%E6%97%AD/task2/image/cirros-system.png)

#### cirros2 ping cirros1 & cirros3
![ifconfig](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340120-%E6%9D%8E%E6%98%8E%E6%97%AD/task2/image/ifconfig.png)  
![cirros2 ping cirros1 & cirros3](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340120-%E6%9D%8E%E6%98%8E%E6%97%AD/task2/image/ping-cirros1-cirros3.png)

#### 关联浮动IP
![allocate float ip](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340120-%E6%9D%8E%E6%98%8E%E6%97%AD/task2/image/associate-float-ip.png)  
![manage float ip](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340120-%E6%9D%8E%E6%98%8E%E6%97%AD/task2/image/manage-float-ip.png)

#### ping外网
![ping float ip](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340120-%E6%9D%8E%E6%98%8E%E6%97%AD/task2/image/ping-float-ip.png)  
![ping baidu](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340120-%E6%9D%8E%E6%98%8E%E6%97%AD/task2/image/ping-baidu.png)

### 遇到的问题
按照TA给的教程一步步执行，一开始确实一气呵成，直到创建成功实例之后要打开cirros控制台，但是显示的确是一片灰，log显示WebSockers.onerror[object Event]。最后换了一台电脑重新配置OpenStack等之后重新创建实例才成功完成本次任务。
![gray image](https://github.com/2019cloudcomputingpractices/CloudComputingCourse/blob/16340120-%E6%9D%8E%E6%98%8E%E6%97%AD/task2/image/grayShow.png)
