## Task3 学习周报

- 本周具体工作计划

  - 制作windows7或者centos7或者ubuntu的镜像，格式为qcow2
  - 利用openstack上传镜像
  - 能够成功创建、开启实例

- 本周主要工作内容

  1. 已经完成工作

     - 制作windows7或者centos7或者ubuntu的镜像，格式为qcow2
     - 利用openstack上传镜像
     - 能够成功创建、开启实例

  2. 未完成工作

     无

  3. 问题与困难

     无

- 下周工作计划

  继续学习openstack的使用



### iso和qcow2、img格式的区别

* iso格式

  ISO文件其实就是光盘的镜像文件，刻录软件可以直接把ISO文件刻录成可安装的系统光盘，ISO文件一般以iso为扩展名，其文件格式为iso9660。ISO 9660，也被一些硬件和软件供应商称作CDFS（光盘文件系统），是一个由国际标准化组织（ISO）为光盘媒介发布的文件系统。其目标是能够在不同的操作系统，如Windows，Mac OS以及类Unix系统上交换数据。通常ISO文件被用于在网络上传输整张光盘的完整信息。 要得到ISO文件，需要对整张光盘的所有扇区按顺序复制下来，每个扇区的大小为2048字节。

* img格式

  IMG是一种文件压缩格式（archive format），主要是为了创建软盘的镜像文件（disk image），它可以用来压缩整个软盘（通常指软软盘，Floppy Disk或Diskette）或整片光盘的内容，使用".IMG"这个扩展名的文件就是利用这种文件格式来创建的。.IMG这个文件格式可视为.ISO格式的一种超集合。由于.ISO只能压缩使用ISO9660和UDF这两种文件系统的存储媒介，意即.ISO只能拿来压缩CD或DVD，因此才发展出了.IMG，它是以.ISO格式为基础另外新增可压缩使用其它文件系统的存储媒介的能力，.IMG可向后兼容于.ISO，如果是拿来压缩CD或DVD，则使用.IMG和.ISO这两种格式所压缩出来的内容是一样的。打开方式可以是光盘刻录，也可以用软件解压。

* qcow2格式

  qcow2 镜像格式是 QEMU 模拟器支持的一种磁盘镜像。它也是可以用一个文件的形式来表示一块固定大小的块设备磁盘。它支持稀疏文件（即支持空洞）以节省存储空间，它支持可选的AES加密以提高镜像文件安全性，支持基于zlib的压缩，支持在一个镜像文件中有多个虚拟机快照。可以使用iso制作qcow2镜像

### 镜像制作到启动的步骤总结

1. 准备qemu-img、virsh、virt-install
2. 检查virt是否有default网络，若无则创建
3. 使用qemu-img创建镜像文件
4. 通过virt-install创建虚拟机，将选定的操作系统安装到创建好的镜像上
5. 进入虚拟机配置所需的环境或者写入所需的数据
6. 关闭虚拟机并通过openstack提供的相关命令上传镜像
7. 在openstack上创建并启动实例

### 跟镜像相关的openstack的一些命令

* 创建映像

  openstack image create

* 删除映像

  openstack image delete

* 列出映像

  openstack image list

* 保存映像

  openstack image save

* 设置映像属性

  openstack image set

* 显示映像详情

  openstack image show
  