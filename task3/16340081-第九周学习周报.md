# 第九周学习周报

## 本周具体工作计划

- 制作windows7或者centos7或者ubuntu的镜像，格式为qcow2
- 利用openstack上传镜像
- 能够成功创建、开启实例
### 具体描述：

1. 制作镜像：先下载要制作镜像的iso文件，启动系统
2. 在镜像中添加一个文件，文件内容写入branch名称，保存
3. 用命令行或dashboard创建镜像
4. 查看镜像的信息、服务
5. 创建该镜像的实例
6. 实例能够ping通外网
7. 尝试用xshell或者桌面远程连接实例（安全组）
8. 开启实例后能够打开之前创建的文件

## 本周主要工作内容

### 已经完成工作

- 制作windows7或者centos7或者ubuntu的镜像，格式为qcow2
- 利用openstack上传镜像
- 能够成功创建、开启实例

## 未完成工作

无

## 问题与困难

无

## 下周工作计划

---

## 第九周学习周报

### iso和qcow2、img格式的区别

- iso，国际标准光盘文件系统格式。符合ISO 9660标准的光盘镜像文件格式，文件扩展名通常为iso。这种文件可以简单的理解为复制光盘上全部信息而形成的镜像文件。

- qcow2 镜像格式是 QEMU 模拟器支持的一种磁盘镜像。它也是可以用一个文件的形式来表示一块固定大小的块设备磁盘。与普通的 raw 格式的镜像相比，有以下特性：

  - 更小的空间占用，即使文件系统不支持空洞(holes)；
  - 支持写时拷贝（COW, copy-on-write），镜像文件只反映底层磁盘的变化；
  - 支持快照（snapshot），镜像文件能够包含多个快照的历史；
  - 可选择基于 zlib 的压缩方式
  - 可以选择 AES 加密

- IMG是一种文件压缩格式（archive format），主要是为了创建软盘的镜像文件（disk image），它可以用来压缩整个软盘（通常指软软盘，Floppy Disk或Diskette）或整片光盘的内容，使用".IMG"这个扩展名的文件就是利用这种文件格式来创建的。
  .IMG这个文件格式可视为.ISO格式的一种超集合。由于.ISO只能压缩使用ISO9660和UDF这两种文件系统的存储媒介，意即.ISO只能拿来压缩CD或DVD，因此才发展出了.IMG，它是以.ISO格式为基础另外新增可压缩使用其它文件系统的存储媒介的能力，.IMG可向后兼容于.ISO，如果是拿来压缩CD或DVD，则使用.IMG和.ISO这两种格式所压缩出来的内容是一样的。打开方式可以是光盘刻录，也可以用软件解压。

### 镜像制作到启动的步骤总结

1. 制作镜像前需要安装qemu-img, virsh, virt-install；
2. 使用已有的iso镜像创建qcow2虚拟磁盘镜像；
3. 创建vm，安装系统，配置vm；
4. 将 qcow2 文件上传到 openstack；
5. 在openstack中利用qcow2镜像创建实例；
6. 启动实例。

### 跟镜像相关的openstack的一些命令

- 创建镜像：

  ```	
  openstack image create
  ```

- 删除镜像：

  ```
  openstack image delete
  ```
- 列出镜像：

  ```
  openstack image list
  ```
- 保存镜像：

  ```
  openstack image save
  ```
- 设置镜像属性：

  ```
  openstack image set
  ```
- 显示镜像详情：

  ```
  openstack image show
  ```

  

